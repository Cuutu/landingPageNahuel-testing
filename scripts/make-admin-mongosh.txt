â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SCRIPT DE MONGOSH PARA ASIGNAR ROL DE ADMIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INSTRUCCIONES:
1. Conectate a MongoDB usando mongosh:
   mongosh "TU_CONNECTION_STRING_AQUI"

2. Selecciona la base de datos (si es necesario):
   use("tu-database-name")

3. Copia y pega el siguiente cÃ³digo, REEMPLAZANDO "TU_EMAIL_AQUI" con el email:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Reemplaza esto con el email del usuario que querÃ©s hacer admin
const userEmail = "TU_EMAIL_AQUI";

// Buscar el usuario
const user = db.users.findOne({ email: userEmail });

if (!user) {
  print("âŒ Usuario no encontrado con email: " + userEmail);
  print("ğŸ’¡ Verifica que el email sea correcto y que el usuario haya hecho login al menos una vez");
} else {
  print("âœ… Usuario encontrado:");
  print("   Nombre: " + user.name);
  print("   Email: " + user.email);
  print("   Rol actual: " + (user.role || "normal"));
  
  if (user.role === "admin") {
    print("â„¹ï¸ El usuario ya es administrador");
  } else {
    // Actualizar rol a admin
    const result = db.users.updateOne(
      { email: userEmail },
      { $set: { role: "admin", updatedAt: new Date() } }
    );
    
    if (result.modifiedCount === 1) {
      print("ğŸ‰ Â¡Usuario promovido a administrador exitosamente!");
      print("ğŸ“§ Email: " + userEmail);
      print("ğŸ”§ Rol nuevo: admin");
      print("ğŸ“… Fecha de promociÃ³n: " + new Date().toLocaleString());
    } else {
      print("âŒ Error al actualizar el usuario");
    }
  }
  
  // Listar todos los administradores
  print("\nğŸ‘¥ Administradores actuales:");
  const admins = db.users.find({ role: "admin" }).toArray();
  admins.forEach((admin, index) => {
    print("   " + (index + 1) + ". " + admin.name + " (" + admin.email + ")");
  });
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

EJEMPLO COMPLETO (reemplaza "admin@ejemplo.com" con el email real):

const userEmail = "admin@ejemplo.com";
const user = db.users.findOne({ email: userEmail });
if (!user) {
  print("âŒ Usuario no encontrado");
} else {
  db.users.updateOne(
    { email: userEmail },
    { $set: { role: "admin", updatedAt: new Date() } }
  );
  print("âœ… Usuario promovido a admin: " + userEmail);
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

COMANDOS ÃšTILES ADICIONALES:

// Ver todos los usuarios
db.users.find().pretty()

// Buscar un usuario especÃ­fico
db.users.findOne({ email: "email@ejemplo.com" })

// Ver todos los administradores
db.users.find({ role: "admin" }).pretty()

// Remover rol de admin (volver a normal)
db.users.updateOne(
  { email: "email@ejemplo.com" },
  { $set: { role: "normal" } }
)

// Ver estructura de un usuario
db.users.findOne({ email: "email@ejemplo.com" })

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
